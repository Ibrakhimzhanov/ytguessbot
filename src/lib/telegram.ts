import { Telegraf, Context, Markup } from 'telegraf'
import { Update } from 'telegraf/types'

export interface BotContext extends Context {
  // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Å–≤–æ–π—Å—Ç–≤–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞, –µ—Å–ª–∏ –Ω—É–∂–Ω—ã
}

const bot = new Telegraf<BotContext>(process.env.BOT_TOKEN!)

// –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±–æ—Ç–∞
bot.start((ctx) => {
  const keyboard = Markup.keyboard([
    ['üìö –ö—É–ø–∏—Ç—å –∫—É—Ä—Å', 'üí∞ –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–ø–ª–∞—Ç—É'],
    ['üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã', 'üìã –û –∫—É—Ä—Å–µ']
  ]).resize()
  
  ctx.reply(
    `–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –∫—É—Ä—Å–∞! üéì\n\n` +
    `–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ –ø—Ä–∏–æ–±—Ä–µ—Å—Ç–∏ –¥–æ—Å—Ç—É–ø –∫ –æ–±—É—á–∞—é—â–µ–º—É –∫—É—Ä—Å—É.\n\n` +
    `–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:`,
    keyboard
  )
})

bot.help((ctx) => {
  ctx.reply(
    `–î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:\n\n` +
    `/start - –ù–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n` +
    `/help - –ü–æ–∫–∞–∑–∞—Ç—å —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ\n` +
    `/buy - –ö—É–ø–∏—Ç—å –∫—É—Ä—Å\n` +
    `/status - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –æ–ø–ª–∞—Ç—ã`
  )
})

export { bot }
